# Raw player info
from mistralai.client import MistralClient
from mistralai.models.chat_completion import ChatMessage
import json
from pathlib import Path
import os

def enrich_profile_with_commentary(profile_path):
    profile = json.loads(Path(profile_path).read_text())
    prompt = f"Describe {profile['player']} as a fantasy football asset."

    client = MistralClient(api_key=os.getenv("MISTRAL_API_KEY"))
    messages = [ChatMessage(role="user", content=prompt)]
    response = client.chat(model="mistral-7b", messages=messages)

    profile["ai_commentary"] = response.choices[0].message.content
    Path(profile_path).write_text(json.dumps(profile, indent=2))
    print("âœ… Commentary added to profile")

# Usage:
# enrich_profile_with_commentary("profiles/justin_jefferson.json")
